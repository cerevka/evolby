//pridat do EJB, normalni volani sendMail() z prislusny metody
//vic recipientu by asi bylo nejlepsi resit pres cyklus, vzhledem k tomu ze se z mailu musi vydolovat InternetAddress

import javax.annotation.Resource;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;
import java.util.Date;
import javax.mail.Message;
import javax.mail.Session;
import javax.mail.Transport;    


@Resource(name = "mail/myMailSession")
    private Session mailSession;

    private void sendMail(String recipient, String subject, String text) throws javax.mail.MessagingException{
        Message message = new MimeMessage(mailSession);
        message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipient, false));
        message.setSubject(subject);
        message.setText(text);
        Date timeStamp = new Date();
        message.setSentDate(timeStamp);
        Transport.send(message);
    }